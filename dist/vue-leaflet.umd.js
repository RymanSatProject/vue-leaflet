(function(O,l){typeof exports=="object"&&typeof module<"u"?l(exports,require("vue"),require("leaflet")):typeof define=="function"&&define.amd?define(["exports","vue","leaflet"],l):(O=typeof globalThis<"u"?globalThis:O||self,l(O["vue-leaflet"]={},O.Vue,O.L))})(this,function(O,l,gt){"use strict";const ce=(o,t)=>{for(const e of Object.keys(t))o.on(e,t[e])},ue=o=>{for(const t of Object.keys(o)){const e=o[t];e&&N(e.cancel)&&e.cancel()}},qe=o=>!o||typeof o.charAt!="function"?o:o.charAt(0).toUpperCase()+o.slice(1),N=o=>typeof o=="function",C=(o,t,e)=>{for(const n in e){const r="set"+qe(n);o[r]?l.watch(()=>e[n],(s,i)=>{o[r](s,i)}):t[r]&&l.watch(()=>e[n],s=>{t[r](s)})}},M=(o,t,e={})=>{const n={...e};for(const r in o){const s=t[r],i=o[r];s&&(s&&s.custom===!0||i!==void 0&&(n[r]=i))}return n},I=o=>{const t={},e={};for(const n in o)if(n.startsWith("on")&&!n.startsWith("onUpdate")&&n!=="onReady"){const r=n.slice(2).toLocaleLowerCase();t[r]=o[n]}else e[n]=o[n];return{listeners:t,attrs:e}},Ee=async o=>{const t=await Promise.all([import("leaflet/dist/images/marker-icon-2x.png"),import("leaflet/dist/images/marker-icon.png"),import("leaflet/dist/images/marker-shadow.png")]);delete o.Default.prototype._getIconUrl,o.Default.mergeOptions({iconRetinaUrl:t[0].default,iconUrl:t[1].default,shadowUrl:t[2].default})},J=o=>{const t=l.ref((...n)=>console.warn(`Method ${o} has been invoked without being replaced`)),e=(...n)=>t.value(...n);return e.wrapped=t,l.provide(o,e),e},H=(o,t)=>o.wrapped.value=t,T=typeof self=="object"&&self.self===self&&self||typeof global=="object"&&global.global===global&&global||globalThis,S=o=>{const t=l.inject(o);if(t===void 0)throw new Error(`Attempt to inject ${o.description} before it was provided.`);return t},bt=Object.freeze(Object.defineProperty({__proto__:null,WINDOW_OR_GLOBAL:T,assertInject:S,bindEventHandlers:ce,cancelDebounces:ue,capitalizeFirstLetter:qe,isFunction:N,propsBinder:C,propsToLeafletOptions:M,provideLeafletWrapper:J,remapEvents:I,resetWebpackIcon:Ee,updateLeafletWrapper:H},Symbol.toStringTag,{value:"Module"})),w=Symbol("useGlobalLeaflet"),A=Symbol("addLayer"),R=Symbol("removeLayer"),D=Symbol("registerControl"),de=Symbol("registerLayerControl"),ye=Symbol("canSetParentHtml"),fe=Symbol("setParentHtml"),pe=Symbol("setIcon"),me=Symbol("bindPopup"),he=Symbol("bindTooltip"),ge=Symbol("unbindPopup"),be=Symbol("unbindTooltip"),Lt=Object.freeze(Object.defineProperty({__proto__:null,AddLayerInjection:A,BindPopupInjection:me,BindTooltipInjection:he,CanSetParentHtmlInjection:ye,RegisterControlInjection:D,RegisterLayerControlInjection:de,RemoveLayerInjection:R,SetIconInjection:pe,SetParentHtmlInjection:fe,UnbindPopupInjection:ge,UnbindTooltipInjection:be,UseGlobalLeafletInjection:w},Symbol.toStringTag,{value:"Module"})),q={options:{type:Object,default:()=>({}),custom:!0}},E=o=>({options:o.options,methods:{}}),vt=Object.freeze(Object.defineProperty({__proto__:null,componentProps:q,setupComponent:E},Symbol.toStringTag,{value:"Module"})),x={...q,pane:{type:String},attribution:{type:String},name:{type:String,custom:!0},layerType:{type:String,custom:!0},visible:{type:Boolean,custom:!0,default:!0}},Z=(o,t,e)=>{const n=S(A),r=S(R),{options:s,methods:i}=E(o),a=M(o,x,s),c=()=>n({leafletObject:t.value}),u=()=>r({leafletObject:t.value}),y={...i,setAttribution(d){u(),t.value.options.attribution=d,o.visible&&c()},setName(){u(),o.visible&&c()},setLayerType(){u(),o.visible&&c()},setVisible(d){t.value&&(d?c():u())},bindPopup(d){if(!t.value||!N(t.value.bindPopup)){console.warn("Attempt to bind popup before bindPopup method available on layer.");return}t.value.bindPopup(d)},bindTooltip(d){if(!t.value||!N(t.value.bindTooltip)){console.warn("Attempt to bind tooltip before bindTooltip method available on layer.");return}t.value.bindTooltip(d)},unbindTooltip(){t.value&&(N(t.value.closeTooltip)&&t.value.closeTooltip(),N(t.value.unbindTooltip)&&t.value.unbindTooltip())},unbindPopup(){t.value&&(N(t.value.closePopup)&&t.value.closePopup(),N(t.value.unbindPopup)&&t.value.unbindPopup())},updateVisibleProp(d){e.emit("update:visible",d)}};return l.provide(me,y.bindPopup),l.provide(he,y.bindTooltip),l.provide(ge,y.unbindPopup),l.provide(be,y.unbindTooltip),l.onUnmounted(()=>{y.unbindPopup(),y.unbindTooltip(),u()}),{options:a,methods:y}},B=(o,t)=>{if(o&&t.default)return l.h("div",{style:{display:"none"}},t.default())},Ot=Object.freeze(Object.defineProperty({__proto__:null,layerProps:x,render:B,setupLayer:Z},Symbol.toStringTag,{value:"Module"})),Le={...x,interactive:{type:Boolean,default:void 0},bubblingMouseEvents:{type:Boolean,default:void 0}},Ze=(o,t,e)=>{const{options:n,methods:r}=Z(o,t,e);return{options:M(o,Le,n),methods:r}},_t=Object.freeze(Object.defineProperty({__proto__:null,interactiveLayerProps:Le,setupInteractiveLayer:Ze},Symbol.toStringTag,{value:"Module"})),K={...Le,stroke:{type:Boolean,default:void 0},color:{type:String},weight:{type:Number},opacity:{type:Number},lineCap:{type:String},lineJoin:{type:String},dashArray:{type:String},dashOffset:{type:String},fill:{type:Boolean,default:void 0},fillColor:{type:String},fillOpacity:{type:Number},fillRule:{type:String},className:{type:String}},ee=(o,t,e)=>{const{options:n,methods:r}=Ze(o,t,e),s=M(o,K,n),i=S(R),a={...r,setStroke(c){t.value.setStyle({stroke:c})},setColor(c){t.value.setStyle({color:c})},setWeight(c){t.value.setStyle({weight:c})},setOpacity(c){t.value.setStyle({opacity:c})},setLineCap(c){t.value.setStyle({lineCap:c})},setLineJoin(c){t.value.setStyle({lineJoin:c})},setDashArray(c){t.value.setStyle({dashArray:c})},setDashOffset(c){t.value.setStyle({dashOffset:c})},setFill(c){t.value.setStyle({fill:c})},setFillColor(c){t.value.setStyle({fillColor:c})},setFillOpacity(c){t.value.setStyle({fillOpacity:c})},setFillRule(c){t.value.setStyle({fillRule:c})},setClassName(c){t.value.setStyle({className:c})}};return l.onBeforeUnmount(()=>{i({leafletObject:t.value})}),{options:s,methods:a}},St=Object.freeze(Object.defineProperty({__proto__:null,pathProps:K,setupPath:ee},Symbol.toStringTag,{value:"Module"})),te={...K,radius:{type:Number},latLng:{type:[Object,Array],required:!0,custom:!0}},ve=(o,t,e)=>{const{options:n,methods:r}=ee(o,t,e),s=M(o,te,n),i={...r,setRadius(a){t.value.setRadius(a)},setLatLng(a){t.value.setLatLng(a)}};return{options:s,methods:i}},jt=Object.freeze(Object.defineProperty({__proto__:null,circleMarkerProps:te,setupCircleMarker:ve},Symbol.toStringTag,{value:"Module"})),Oe={...te,radius:{type:Number}},We=(o,t,e)=>{const{options:n,methods:r}=ve(o,t,e),s=M(o,Oe,n),i={...r};return{options:s,methods:i}},Pt=Object.freeze(Object.defineProperty({__proto__:null,circleProps:Oe,setupCircle:We},Symbol.toStringTag,{value:"Module"})),Tt=l.defineComponent({name:"LCircle",props:Oe,setup(o,t){const e=l.ref(),n=l.ref(!1),r=l.inject(w),s=S(A),{options:i,methods:a}=We(o,e,t);return l.onMounted(async()=>{const{circle:c}=r?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(c(o.latLng,i));const{listeners:u}=I(t.attrs);e.value.on(u),C(a,e.value,o),s({...o,...a,leafletObject:e.value}),n.value=!0,l.nextTick(()=>t.emit("ready",e.value))}),{ready:n,leafletObject:e}},render(){return B(this.ready,this.$slots)}}),Mt=l.defineComponent({name:"LCircleMarker",props:te,setup(o,t){const e=l.ref(),n=l.ref(!1),r=l.inject(w),s=S(A),{options:i,methods:a}=ve(o,e,t);return l.onMounted(async()=>{const{circleMarker:c}=r?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(c(o.latLng,i));const{listeners:u}=I(t.attrs);e.value.on(u),C(a,e.value,o),s({...o,...a,leafletObject:e.value}),n.value=!0,l.nextTick(()=>t.emit("ready",e.value))}),{ready:n,leafletObject:e}},render(){return B(this.ready,this.$slots)}}),F={...q,position:{type:String}},W=(o,t)=>{const{options:e,methods:n}=E(o),r=M(o,F,e),s={...n,setPosition(i){t.value&&t.value.setPosition(i)}};return l.onUnmounted(()=>{t.value&&t.value.remove()}),{options:r,methods:s}},Je=o=>o.default?l.h("div",{ref:"root"},o.default()):null,Ct=Object.freeze(Object.defineProperty({__proto__:null,controlProps:F,renderLControl:Je,setupControl:W},Symbol.toStringTag,{value:"Module"})),wt=l.defineComponent({name:"LControl",props:{...F,disableClickPropagation:{type:Boolean,custom:!0,default:!0},disableScrollPropagation:{type:Boolean,custom:!0,default:!1}},setup(o,t){const e=l.ref(),n=l.ref(),r=l.inject(w),s=S(D),{options:i,methods:a}=W(o,e);return l.onMounted(async()=>{const{Control:c,DomEvent:u}=r?T.L:await import("leaflet/dist/leaflet-src.esm"),y=c.extend({onAdd(){return n.value}});e.value=l.markRaw(new y(i)),C(a,e.value,o),s({leafletObject:e.value}),o.disableClickPropagation&&n.value&&u.disableClickPropagation(n.value),o.disableScrollPropagation&&n.value&&u.disableScrollPropagation(n.value),l.nextTick(()=>t.emit("ready",e.value))}),{root:n,leafletObject:e}},render(){return Je(this.$slots)}}),_e={...F,prefix:{type:String}},He=(o,t)=>{const{options:e,methods:n}=W(o,t),r=M(o,_e,e),s={...n,setPrefix(i){t.value.setPrefix(i)}};return{options:r,methods:s}},Gt=Object.freeze(Object.defineProperty({__proto__:null,controlAttributionProps:_e,setupControlAttribution:He},Symbol.toStringTag,{value:"Module"})),kt=l.defineComponent({name:"LControlAttribution",props:_e,setup(o,t){const e=l.ref(),n=l.inject(w),r=S(D),{options:s,methods:i}=He(o,e);return l.onMounted(async()=>{const{control:a}=n?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(a.attribution(s)),C(i,e.value,o),r({leafletObject:e.value}),l.nextTick(()=>t.emit("ready",e.value))}),{leafletObject:e}},render(){return null}}),Se={...F,collapsed:{type:Boolean,default:void 0},autoZIndex:{type:Boolean,default:void 0},hideSingleBase:{type:Boolean,default:void 0},sortLayers:{type:Boolean,default:void 0},sortFunction:{type:Function}},Re=(o,t)=>{const{options:e}=W(o,t);return{options:M(o,Se,e),methods:{addLayer(s){s.layerType==="base"?t.value.addBaseLayer(s.leafletObject,s.name):s.layerType==="overlay"&&t.value.addOverlay(s.leafletObject,s.name)},removeLayer(s){t.value.removeLayer(s.leafletObject)}}}},It=Object.freeze(Object.defineProperty({__proto__:null,controlLayersProps:Se,setupControlLayers:Re},Symbol.toStringTag,{value:"Module"})),At=l.defineComponent({name:"LControlLayers",props:Se,setup(o,t){const e=l.ref(),n=l.inject(w),r=S(de),{options:s,methods:i}=Re(o,e);return l.onMounted(async()=>{const{control:a}=n?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(a.layers(void 0,void 0,s)),C(i,e.value,o),r({...o,...i,leafletObject:e.value}),l.nextTick(()=>t.emit("ready",e.value))}),{leafletObject:e}},render(){return null}}),je={...F,maxWidth:{type:Number},metric:{type:Boolean,default:void 0},imperial:{type:Boolean,default:void 0},updateWhenIdle:{type:Boolean,default:void 0}},Ke=(o,t)=>{const{options:e,methods:n}=W(o,t);return{options:M(o,je,e),methods:n}},Ut=Object.freeze(Object.defineProperty({__proto__:null,controlScaleProps:je,setupControlScale:Ke},Symbol.toStringTag,{value:"Module"})),Bt=l.defineComponent({name:"LControlScale",props:je,setup(o,t){const e=l.ref(),n=l.inject(w),r=S(D),{options:s,methods:i}=Ke(o,e);return l.onMounted(async()=>{const{control:a}=n?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(a.scale(s)),C(i,e.value,o),r({leafletObject:e.value}),l.nextTick(()=>t.emit("ready",e.value))}),{leafletObject:e}},render(){return null}}),Pe={...F,zoomInText:{type:String},zoomInTitle:{type:String},zoomOutText:{type:String},zoomOutTitle:{type:String}},Ye=(o,t)=>{const{options:e,methods:n}=W(o,t);return{options:M(o,Pe,e),methods:n}},zt=Object.freeze(Object.defineProperty({__proto__:null,controlZoomProps:Pe,setupControlZoom:Ye},Symbol.toStringTag,{value:"Module"})),Nt=l.defineComponent({name:"LControlZoom",props:Pe,setup(o,t){const e=l.ref(),n=l.inject(w),r=S(D),{options:s,methods:i}=Ye(o,e);return l.onMounted(async()=>{const{control:a}=n?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(a.zoom(s)),C(i,e.value,o),r({leafletObject:e.value}),l.nextTick(()=>t.emit("ready",e.value))}),{leafletObject:e}},render(){return null}}),Y={...x},oe=(o,t,e)=>{const{options:n,methods:r}=Z(o,t,e),s=M(o,Y,n),i={...r,addLayer(a){t.value.addLayer(a.leafletObject)},removeLayer(a){t.value.removeLayer(a.leafletObject)}};return l.provide(A,i.addLayer),l.provide(R,i.removeLayer),{options:s,methods:i}},$t=Object.freeze(Object.defineProperty({__proto__:null,layerGroupProps:Y,setupLayerGroup:oe},Symbol.toStringTag,{value:"Module"})),Te={...Y},Ve=(o,t,e)=>{const{options:n,methods:r}=oe(o,t,e),s=M(o,Te,n),i={...r};return{options:s,methods:i}},xt=Object.freeze(Object.defineProperty({__proto__:null,featureGroupProps:Te,setupFeatureGroup:Ve},Symbol.toStringTag,{value:"Module"})),Ft=l.defineComponent({props:Te,setup(o,t){const e=l.ref(),n=l.ref(!1),r=l.inject(w),s=S(A),{methods:i,options:a}=Ve(o,e,t);return l.onMounted(async()=>{const{featureGroup:c}=r?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(c(void 0,a));const{listeners:u}=I(t.attrs);e.value.on(u),C(i,e.value,o),s({...o,...i,leafletObject:e.value}),n.value=!0,l.nextTick(()=>t.emit("ready",e.value))}),{ready:n,leafletObject:e}},render(){return B(this.ready,this.$slots)}}),Me={...Y,geojson:{type:[Object,Array],custom:!0},optionsStyle:{type:Function,custom:!0}},Xe=(o,t,e)=>{const{options:n,methods:r}=oe(o,t,e),s=M(o,Me,n);Object.prototype.hasOwnProperty.call(o,"optionsStyle")&&(s.style=o.optionsStyle);const i={...r,setGeojson(a){t.value.clearLayers(),t.value.addData(a)},setOptionsStyle(a){t.value.setStyle(a)},getGeoJSONData(){return t.value.toGeoJSON()},getBounds(){return t.value.getBounds()}};return{options:s,methods:i}},Dt=Object.freeze(Object.defineProperty({__proto__:null,geoJSONProps:Me,setupGeoJSON:Xe},Symbol.toStringTag,{value:"Module"})),qt=l.defineComponent({props:Me,setup(o,t){const e=l.ref(),n=l.ref(!1),r=l.inject(w),s=S(A),{methods:i,options:a}=Xe(o,e,t);return l.onMounted(async()=>{const{geoJSON:c}=r?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(c(o.geojson,a));const{listeners:u}=I(t.attrs);e.value.on(u),C(i,e.value,o),s({...o,...i,leafletObject:e.value}),n.value=!0,l.nextTick(()=>t.emit("ready",e.value))}),{ready:n,leafletObject:e}},render(){return B(this.ready,this.$slots)}}),ne={...x,opacity:{type:Number},zIndex:{type:Number},tileSize:{type:[Number,Array,Object]},noWrap:{type:Boolean,default:void 0},minZoom:{type:Number},maxZoom:{type:Number},className:{type:String}},Ce=(o,t,e)=>{const{options:n,methods:r}=Z(o,t,e),s=M(o,ne,n),i={...r,setTileComponent(){var a;(a=t.value)==null||a.redraw()}};return l.onUnmounted(()=>{t.value.off()}),{options:s,methods:i}},Qe=(o,t,e,n)=>o.extend({initialize(r){this.tileComponents={},this.on("tileunload",this._unloadTile),e.setOptions(this,r)},createTile(r){const s=this._tileCoordsToKey(r);this.tileComponents[s]=t.create("div");const i=l.h({setup:n,props:["coords"]},{coords:r});return l.render(i,this.tileComponents[s]),this.tileComponents[s]},_unloadTile(r){const s=this._tileCoordsToKey(r.coords);this.tileComponents[s]&&(this.tileComponents[s].innerHTML="",this.tileComponents[s]=void 0)}}),Et=Object.freeze(Object.defineProperty({__proto__:null,CreateVueGridLayer:Qe,gridLayerProps:ne,setupGridLayer:Ce},Symbol.toStringTag,{value:"Module"})),Zt=l.defineComponent({props:{...ne,childRender:{type:Function,required:!0}},setup(o,t){const e=l.ref(),n=l.ref(null),r=l.ref(!1),s=l.inject(w),i=S(A),{options:a,methods:c}=Ce(o,e,t);return l.onMounted(async()=>{const{GridLayer:u,DomUtil:y,Util:d}=s?T.L:await import("leaflet/dist/leaflet-src.esm"),f=Qe(u,y,d,o.childRender);e.value=l.markRaw(new f(a));const{listeners:p}=I(t.attrs);e.value.on(p),C(c,e.value,o),i({...o,...c,leafletObject:e.value}),r.value=!0,l.nextTick(()=>t.emit("ready",e.value))}),{root:n,ready:r,leafletObject:e}},render(){return this.ready?l.h("div",{style:{display:"none"},ref:"root"}):null}}),we={iconUrl:{type:String},iconRetinaUrl:{type:String},iconSize:{type:[Object,Array]},iconAnchor:{type:[Object,Array]},popupAnchor:{type:[Object,Array]},tooltipAnchor:{type:[Object,Array]},shadowUrl:{type:String},shadowRetinaUrl:{type:String},shadowSize:{type:[Object,Array]},shadowAnchor:{type:[Object,Array]},bgPos:{type:[Object,Array]},className:{type:String}},Wt=Object.freeze(Object.defineProperty({__proto__:null,iconProps:we},Symbol.toStringTag,{value:"Module"})),Jt=l.defineComponent({name:"LIcon",props:{...we,...q},setup(o,t){const e=l.ref(),n=l.inject(w),r=S(ye),s=S(fe),i=S(pe);let a,c,u,y,d;const f=(_,g,b)=>{const U=_&&_.innerHTML;if(!g){b&&d&&r()&&s(U);return}const{listeners:$}=I(t.attrs);d&&c(d,$);const{options:X}=E(o),j=M(o,we,X);U&&(j.html=U),d=j.html?u(j):y(j),a(d,$),i(d)},p=()=>{l.nextTick(()=>f(e.value,!0,!1))},h=()=>{l.nextTick(()=>f(e.value,!1,!0))},G={setIconUrl:p,setIconRetinaUrl:p,setIconSize:p,setIconAnchor:p,setPopupAnchor:p,setTooltipAnchor:p,setShadowUrl:p,setShadowRetinaUrl:p,setShadowAnchor:p,setBgPos:p,setClassName:p,setHtml:p};return l.onMounted(async()=>{const{DomEvent:_,divIcon:g,icon:b}=n?T.L:await import("leaflet/dist/leaflet-src.esm");a=_.on,c=_.off,u=g,y=b,C(G,{},o),new MutationObserver(h).observe(e.value,{attributes:!0,childList:!0,characterData:!0,subtree:!0}),p()}),{root:e}},render(){const o=this.$slots.default?this.$slots.default():void 0;return l.h("div",{ref:"root"},o)}}),re={...x,opacity:{type:Number},alt:{type:String},interactive:{type:Boolean,default:void 0},crossOrigin:{type:Boolean,default:void 0},errorOverlayUrl:{type:String},zIndex:{type:Number},className:{type:String},url:{type:String,required:!0,custom:!0},bounds:{type:[Array,Object],required:!0,custom:!0}},Ge=(o,t,e)=>{const{options:n,methods:r}=Z(o,t,e),s=M(o,re,n),i={...r,setOpacity(a){return t.value.setOpacity(a)},setUrl(a){return t.value.setUrl(a)},setBounds(a){return t.value.setBounds(a)},getBounds(){return t.value.getBounds()},getElement(){return t.value.getElement()},bringToFront(){return t.value.bringToFront()},bringToBack(){return t.value.bringToBack()},setZIndex(a){return t.value.setZIndex(a)}};return{options:s,methods:i}},Ht=Object.freeze(Object.defineProperty({__proto__:null,imageOverlayProps:re,setupImageOverlay:Ge},Symbol.toStringTag,{value:"Module"})),Rt=l.defineComponent({name:"LImageOverlay",props:re,setup(o,t){const e=l.ref(),n=l.ref(!1),r=l.inject(w),s=S(A),{options:i,methods:a}=Ge(o,e,t);return l.onMounted(async()=>{const{imageOverlay:c}=r?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(c(o.url,o.bounds,i));const{listeners:u}=I(t.attrs);e.value.on(u),C(a,e.value,o),s({...o,...a,leafletObject:e.value}),n.value=!0,l.nextTick(()=>t.emit("ready",e.value))}),{ready:n,leafletObject:e}},render(){return B(this.ready,this.$slots)}}),et={...re,url:{type:[SVGElement,String],required:!0,custom:!0}},Kt=(o,t,e)=>{const{options:n,methods:r}=Ge(o,t,e),s=M(o,et,n),i={...r,getElement(){return t.value.getElement()}};return{options:s,methods:i}},Yt=l.defineComponent({name:"LSVGOverlay",props:et,setup(o,t){const e=l.ref(),n=l.ref(!1),r=l.inject(w),s=S(A),{options:i,methods:a}=Kt(o,e,t);return l.onMounted(async()=>{const{svgOverlay:c}=r?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(c(o.url,o.bounds,i));const{listeners:u}=I(t.attrs);e.value.on(u),C(a,e.value,o),s({...o,...a,leafletObject:e.value}),n.value=!0,l.nextTick(()=>t.emit("ready",e.value))}),{ready:n,leafletObject:e}},render(){return B(this.ready,this.$slots)}}),Vt=l.defineComponent({props:Y,setup(o,t){const e=l.ref(),n=l.ref(!1),r=l.inject(w),s=S(A),{methods:i}=oe(o,e,t);return l.onMounted(async()=>{const{layerGroup:a}=r?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(a(void 0,o.options));const{listeners:c}=I(t.attrs);e.value.on(c),C(i,e.value,o),s({...o,...i,leafletObject:e.value}),n.value=!0,l.nextTick(()=>t.emit("ready",e.value))}),{ready:n,leafletObject:e}},render(){return B(this.ready,this.$slots)}});function tt(o,t,e){var n,r,s;t===void 0&&(t=50),e===void 0&&(e={});var i=(n=e.isImmediate)!=null&&n,a=(r=e.callback)!=null&&r,c=e.maxWait,u=Date.now(),y=[];function d(){if(c!==void 0){var p=Date.now()-u;if(p+t>=c)return c-p}return t}var f=function(){var p=[].slice.call(arguments),h=this;return new Promise(function(G,_){var g=i&&s===void 0;if(s!==void 0&&clearTimeout(s),s=setTimeout(function(){if(s=void 0,u=Date.now(),!i){var U=o.apply(h,p);a&&a(U),y.forEach(function($){return(0,$.resolve)(U)}),y=[]}},d()),g){var b=o.apply(h,p);return a&&a(b),G(b)}y.push({resolve:G,reject:_})})};return f.cancel=function(p){s!==void 0&&clearTimeout(s),y.forEach(function(h){return(0,h.reject)(p)}),y=[]},f}const ot={...q,center:{type:[Object,Array]},bounds:{type:[Array,Object]},maxBounds:{type:[Array,Object]},zoom:{type:Number},minZoom:{type:Number},maxZoom:{type:Number},paddingBottomRight:{type:[Object,Array]},paddingTopLeft:{type:Object},padding:{type:Object},worldCopyJump:{type:Boolean,default:void 0},crs:{type:[String,Object]},maxBoundsViscosity:{type:Number},inertia:{type:Boolean,default:void 0},inertiaDeceleration:{type:Number},inertiaMaxSpeed:{type:Number},easeLinearity:{type:Number},zoomAnimation:{type:Boolean,default:void 0},zoomAnimationThreshold:{type:Number},fadeAnimation:{type:Boolean,default:void 0},markerZoomAnimation:{type:Boolean,default:void 0},noBlockingAnimations:{type:Boolean,default:void 0},useGlobalLeaflet:{type:Boolean,default:!0,custom:!0}},Xt=l.defineComponent({inheritAttrs:!1,emits:["ready","update:zoom","update:center","update:bounds"],props:ot,setup(o,t){const e=l.ref(),n=l.reactive({ready:!1,layersToAdd:[],layersInControl:[]}),{options:r}=E(o),s=M(o,ot,r),{listeners:i,attrs:a}=I(t.attrs),c=J(A),u=J(R),y=J(D),d=J(de);l.provide(w,o.useGlobalLeaflet);const f=l.computed(()=>{const g={};return o.noBlockingAnimations&&(g.animate=!1),g}),p=l.computed(()=>{const g=f.value;return o.padding&&(g.padding=o.padding),o.paddingTopLeft&&(g.paddingTopLeft=o.paddingTopLeft),o.paddingBottomRight&&(g.paddingBottomRight=o.paddingBottomRight),g}),h={moveend:tt(g=>{n.leafletRef&&(t.emit("update:zoom",n.leafletRef.getZoom()),t.emit("update:center",n.leafletRef.getCenter()),t.emit("update:bounds",n.leafletRef.getBounds()))}),overlayadd(g){const b=n.layersInControl.find(U=>U.name===g.name);b&&b.updateVisibleProp(!0)},overlayremove(g){const b=n.layersInControl.find(U=>U.name===g.name);b&&b.updateVisibleProp(!1)}};l.onMounted(async()=>{o.useGlobalLeaflet&&(T.L=T.L||await import("leaflet"));const{map:g,CRS:b,Icon:U,latLngBounds:$,latLng:X,stamp:j}=o.useGlobalLeaflet?T.L:await import("leaflet/dist/leaflet-src.esm");try{s.beforeMapMount&&await s.beforeMapMount()}catch(m){console.error(`The following error occurred running the provided beforeMapMount hook ${m.message}`)}await Ee(U);const v=typeof s.crs=="string"?b[s.crs]:s.crs;s.crs=v||b.EPSG3857;const k={addLayer(m){m.layerType!==void 0&&(n.layerControl===void 0?n.layersToAdd.push(m):n.layersInControl.find(z=>j(z.leafletObject)===j(m.leafletObject))||(n.layerControl.addLayer(m),n.layersInControl.push(m))),m.visible!==!1&&n.leafletRef.addLayer(m.leafletObject)},removeLayer(m){m.layerType!==void 0&&(n.layerControl===void 0?n.layersToAdd=n.layersToAdd.filter(P=>P.name!==m.name):(n.layerControl.removeLayer(m.leafletObject),n.layersInControl=n.layersInControl.filter(P=>j(P.leafletObject)!==j(m.leafletObject)))),n.leafletRef.removeLayer(m.leafletObject)},registerLayerControl(m){n.layerControl=m,n.layersToAdd.forEach(P=>{n.layerControl.addLayer(P)}),n.layersToAdd=[],y(m)},registerControl(m){n.leafletRef.addControl(m.leafletObject)},setZoom(m){const P=n.leafletRef.getZoom();m!==P&&n.leafletRef.setZoom(m,f.value)},setCrs(m){const P=n.leafletRef.getBounds();n.leafletRef.options.crs=m,n.leafletRef.fitBounds(P,{animate:!1,padding:[0,0]})},fitBounds(m){n.leafletRef.fitBounds(m,p.value)},setBounds(m){if(!m)return;const P=$(m);if(!P.isValid())return;!(n.lastSetBounds||n.leafletRef.getBounds()).equals(P,0)&&(n.lastSetBounds=P,n.leafletRef.fitBounds(P))},setCenter(m){if(m==null)return;const P=X(m),z=n.lastSetCenter||n.leafletRef.getCenter();(z.lat!==P.lat||z.lng!==P.lng)&&(n.lastSetCenter=P,n.leafletRef.panTo(P,f.value))}};H(c,k.addLayer),H(u,k.removeLayer),H(y,k.registerControl),H(d,k.registerLayerControl),n.leafletRef=l.markRaw(g(e.value,s)),C(k,n.leafletRef,o),ce(n.leafletRef,h),ce(n.leafletRef,i),n.ready=!0,l.nextTick(()=>t.emit("ready",n.leafletRef))}),l.onBeforeUnmount(()=>{ue(h),n.leafletRef&&(n.leafletRef.off(),n.leafletRef.remove())});const G=l.computed(()=>n.leafletRef),_=l.computed(()=>n.ready);return{root:e,ready:_,leafletObject:G,attrs:a}},render({attrs:o}){return o.style||(o.style={}),o.style.width||(o.style.width="100%"),o.style.height||(o.style.height="100%"),l.h("div",{...o,ref:"root"},this.ready&&this.$slots.default?this.$slots.default():{})}}),Qt=["Symbol(Comment)","Symbol(Text)"],eo=["LTooltip","LPopup"],ke={...x,draggable:{type:Boolean,default:void 0},icon:{type:[Object]},zIndexOffset:{type:Number},latLng:{type:[Object,Array],custom:!0,required:!0}},nt=(o,t,e)=>{const{options:n,methods:r}=Z(o,t,e),s=M(o,ke,n),i={...r,setDraggable(a){t.value.dragging&&(a?t.value.dragging.enable():t.value.dragging.disable())},latLngSync(a){e.emit("update:latLng",a.latlng),e.emit("update:lat-lng",a.latlng)},setLatLng(a){if(a!=null&&t.value){const c=t.value.getLatLng();(!c||!c.equals(a))&&t.value.setLatLng(a)}}};return{options:s,methods:i}},rt=(o,t)=>{const e=t.slots.default&&t.slots.default();return e&&e.length&&e.some(to)};function to(o){return!(Qt.includes(o.type.toString())||eo.includes(o.type.name))}const oo=Object.freeze(Object.defineProperty({__proto__:null,markerProps:ke,setupMarker:nt,shouldBlankIcon:rt},Symbol.toStringTag,{value:"Module"})),no=l.defineComponent({name:"LMarker",props:ke,setup(o,t){const e=l.ref(),n=l.ref(!1),r=l.inject(w),s=S(A);l.provide(ye,()=>{var u;return!!((u=e.value)!=null&&u.getElement())}),l.provide(fe,u=>{var d,f;const y=N((d=e.value)==null?void 0:d.getElement)&&((f=e.value)==null?void 0:f.getElement());y&&(y.innerHTML=u)}),l.provide(pe,u=>{var y;return((y=e.value)==null?void 0:y.setIcon)&&e.value.setIcon(u)});const{options:i,methods:a}=nt(o,e,t),c={moveHandler:tt(a.latLngSync)};return l.onMounted(async()=>{const{marker:u,divIcon:y}=r?T.L:await import("leaflet/dist/leaflet-src.esm");rt(i,t)&&(i.icon=y({className:""})),e.value=l.markRaw(u(o.latLng,i));const{listeners:d}=I(t.attrs);e.value.on(d),e.value.on("move",c.moveHandler),C(a,e.value,o),s({...o,...a,leafletObject:e.value}),n.value=!0,l.nextTick(()=>t.emit("ready",e.value))}),l.onBeforeUnmount(()=>ue(c)),{ready:n,leafletObject:e}},render(){return B(this.ready,this.$slots)}}),se={...K,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},Ie=(o,t,e)=>{const{options:n,methods:r}=ee(o,t,e),s=M(o,se,n),i={...r,setSmoothFactor(a){t.value.setStyle({smoothFactor:a})},setNoClip(a){t.value.setStyle({noClip:a})},addLatLng(a){t.value.addLatLng(a)}};return{options:s,methods:i}},ro=Object.freeze(Object.defineProperty({__proto__:null,polylineProps:se,setupPolyline:Ie},Symbol.toStringTag,{value:"Module"})),V={...se},Ae=(o,t,e)=>{const{options:n,methods:r}=Ie(o,t,e),s=M(o,V,n),i={...r,toGeoJSON(a){return t.value.toGeoJSON(a)}};return{options:s,methods:i}},so=Object.freeze(Object.defineProperty({__proto__:null,polygonProps:V,setupPolygon:Ae},Symbol.toStringTag,{value:"Module"})),ao=l.defineComponent({name:"LPolygon",props:V,setup(o,t){const e=l.ref(),n=l.ref(!1),r=l.inject(w),s=S(A),{options:i,methods:a}=Ae(o,e,t);return l.onMounted(async()=>{const{polygon:c}=r?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(c(o.latLngs,i));const{listeners:u}=I(t.attrs);e.value.on(u),C(a,e.value,o),s({...o,...a,leafletObject:e.value}),n.value=!0,l.nextTick(()=>t.emit("ready",e.value))}),{ready:n,leafletObject:e}},render(){return B(this.ready,this.$slots)}}),io=l.defineComponent({name:"LPolyline",props:se,setup(o,t){const e=l.ref(),n=l.ref(!1),r=l.inject(w),s=S(A),{options:i,methods:a}=Ie(o,e,t);return l.onMounted(async()=>{const{polyline:c}=r?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(c(o.latLngs,i));const{listeners:u}=I(t.attrs);e.value.on(u),C(a,e.value,o),s({...o,...a,leafletObject:e.value}),n.value=!0,l.nextTick(()=>t.emit("ready",e.value))}),{ready:n,leafletObject:e}},render(){return B(this.ready,this.$slots)}});var lo={exports:{}};(function(o){(function(t){var e;e=gt,o.exports=t(e)})(function(t){return t.Polyline._flat=t.LineUtil.isFlat||t.Polyline._flat||function(e){return!t.Util.isArray(e[0])||typeof e[0][0]!="object"&&typeof e[0][0]<"u"},t.GeometryUtil=t.extend(t.GeometryUtil||{},{distance:function(e,n,r){return e.latLngToLayerPoint(n).distanceTo(e.latLngToLayerPoint(r))},distanceSegment:function(e,n,r,s){var i=e.latLngToLayerPoint(n),a=e.latLngToLayerPoint(r),c=e.latLngToLayerPoint(s);return t.LineUtil.pointToSegmentDistance(i,a,c)},readableDistance:function(e,n){var r=n!=="imperial",s;return r?e>1e3?s=(e/1e3).toFixed(2)+" km":s=e.toFixed(1)+" m":(e*=1.09361,e>1760?s=(e/1760).toFixed(2)+" miles":s=e.toFixed(1)+" yd"),s},belongsSegment:function(e,n,r,s){s=s===void 0?.2:s;var i=n.distanceTo(r),a=n.distanceTo(e)+e.distanceTo(r)-i;return a/i<s},length:function(e){var n=t.GeometryUtil.accumulatedLengths(e);return n.length>0?n[n.length-1]:0},accumulatedLengths:function(e){if(typeof e.getLatLngs=="function"&&(e=e.getLatLngs()),e.length===0)return[];for(var n=0,r=[0],s=0,i=e.length-1;s<i;s++)n+=e[s].distanceTo(e[s+1]),r.push(n);return r},closestOnSegment:function(e,n,r,s){var i=e.getMaxZoom();i===1/0&&(i=e.getZoom());var a=e.project(n,i),c=e.project(r,i),u=e.project(s,i),y=t.LineUtil.closestPointOnSegment(a,c,u);return e.unproject(y,i)},closestOnCircle:function(e,n){const r=e.getLatLng(),s=e.getRadius(),i=typeof s=="number"?s:s.radius,a=n.lng,c=n.lat,u=r.lng,y=r.lat,d=a-u,f=c-y,p=Math.sqrt(d*d+f*f),h=u+d/p*i,G=y+f/p*i;return new t.LatLng(G,h)},closest:function(e,n,r,s){var i,a=1/0,c=null,u,y,d,f;if(n instanceof Array)if(n[0]instanceof Array&&typeof n[0][0]!="number"){for(u=0;u<n.length;u++)f=t.GeometryUtil.closest(e,n[u],r,s),f&&f.distance<a&&(a=f.distance,c=f);return c}else if(n[0]instanceof t.LatLng||typeof n[0][0]=="number"||typeof n[0].lat=="number")n=t.polyline(n);else return c;if(!(n instanceof t.Polyline))return c;if(i=JSON.parse(JSON.stringify(n.getLatLngs().slice(0))),n instanceof t.Polygon){var p=function(g){if(t.Polyline._flat(g))g.push(g[0]);else for(var b=0;b<g.length;b++)p(g[b])};p(i)}if(t.Polyline._flat(i)){if(s){for(u=0,y=i.length;u<y;u++){var h=i[u];d=t.GeometryUtil.distance(e,r,h),d<a&&(a=d,c=h,c.distance=d)}return c}for(u=0,y=i.length;u<y-1;u++){var G=i[u],_=i[u+1];d=t.GeometryUtil.distanceSegment(e,r,G,_),d<=a&&(a=d,c=t.GeometryUtil.closestOnSegment(e,r,G,_),c.distance=d)}return c}else{for(u=0;u<i.length;u++)f=t.GeometryUtil.closest(e,i[u],r,s),f.distance<a&&(a=f.distance,c=f);return c}},closestLayer:function(e,n,r){for(var s=1/0,i=null,a=null,c=1/0,u=0,y=n.length;u<y;u++){var d=n[u];if(d instanceof t.LayerGroup){var f=t.GeometryUtil.closestLayer(e,d.getLayers(),r);f.distance<s&&(s=f.distance,i=f)}else d instanceof t.Circle?(a=this.closestOnCircle(d,r),c=t.GeometryUtil.distance(e,r,a)):typeof d.getLatLng=="function"?(a=d.getLatLng(),c=t.GeometryUtil.distance(e,r,a)):(a=t.GeometryUtil.closest(e,d,r),a&&(c=a.distance)),c<s&&(s=c,i={layer:d,latlng:a,distance:c})}return i},nClosestLayers:function(e,n,r,s){if(s=typeof s=="number"?s:n.length,s<1||n.length<1)return null;for(var i=[],a,c,u=0,y=n.length;u<y;u++){var d=n[u];if(d instanceof t.LayerGroup){var f=t.GeometryUtil.closestLayer(e,d.getLayers(),r);i.push(f)}else d instanceof t.Circle?(c=this.closestOnCircle(d,r),a=t.GeometryUtil.distance(e,r,c)):typeof d.getLatLng=="function"?(c=d.getLatLng(),a=t.GeometryUtil.distance(e,r,c)):(c=t.GeometryUtil.closest(e,d,r),c&&(a=c.distance)),i.push({layer:d,latlng:c,distance:a})}return i.sort(function(p,h){return p.distance-h.distance}),i.length>s?i.slice(0,s):i},layersWithin:function(e,n,r,s){s=typeof s=="number"?s:1/0;for(var i=[],a=null,c=0,u=0,y=n.length;u<y;u++){var d=n[u];typeof d.getLatLng=="function"?(a=d.getLatLng(),c=t.GeometryUtil.distance(e,r,a)):(a=t.GeometryUtil.closest(e,d,r),a&&(c=a.distance)),a&&c<s&&i.push({layer:d,latlng:a,distance:c})}var f=i.sort(function(p,h){return p.distance-h.distance});return f},closestLayerSnap:function(e,n,r,s,i){s=typeof s=="number"?s:1/0,i=typeof i=="boolean"?i:!0;var a=t.GeometryUtil.closestLayer(e,n,r);if(!a||a.distance>s)return null;if(i&&typeof a.layer.getLatLngs=="function"){var c=t.GeometryUtil.closest(e,a.layer,a.latlng,!0);c.distance<s&&(a.latlng=c,a.distance=t.GeometryUtil.distance(e,c,r))}return a},interpolateOnPointSegment:function(e,n,r){return t.point(e.x*(1-r)+r*n.x,e.y*(1-r)+r*n.y)},interpolateOnLine:function(e,n,r){n=n instanceof t.Polyline?n.getLatLngs():n;var s=n.length;if(s<2)return null;if(r=Math.max(Math.min(r,1),0),r===0)return{latLng:n[0]instanceof t.LatLng?n[0]:t.latLng(n[0]),predecessor:-1};if(r==1)return{latLng:n[n.length-1]instanceof t.LatLng?n[n.length-1]:t.latLng(n[n.length-1]),predecessor:n.length-2};var i=e.getMaxZoom();i===1/0&&(i=e.getZoom());for(var a=[],c=0,u=0;u<s;u++)a[u]=e.project(n[u],i),u>0&&(c+=a[u-1].distanceTo(a[u]));for(var y=c*r,d=0,f=0,u=0;f<y;u++){var p=a[u],h=a[u+1];d=f,f+=p.distanceTo(h)}if(p==null&&h==null)var p=a[0],h=a[1],u=1;var G=f-d!==0?(y-d)/(f-d):0,_=t.GeometryUtil.interpolateOnPointSegment(p,h,G);return{latLng:e.unproject(_,i),predecessor:u-1}},locateOnLine:function(e,n,r){var s=n.getLatLngs();if(r.equals(s[0]))return 0;if(r.equals(s[s.length-1]))return 1;for(var i=t.GeometryUtil.closest(e,n,r,!1),a=t.GeometryUtil.accumulatedLengths(s),c=a[a.length-1],u=0,y=!1,d=0,f=s.length-1;d<f;d++){var p=s[d],h=s[d+1];if(u=a[d],t.GeometryUtil.belongsSegment(i,p,h,.001)){u+=p.distanceTo(i),y=!0;break}}if(!y)throw"Could not interpolate "+r.toString()+" within "+n.toString();return u/c},reverse:function(e){return t.polyline(e.getLatLngs().slice(0).reverse())},extract:function(e,n,r,s){if(r>s)return t.GeometryUtil.extract(e,t.GeometryUtil.reverse(n),1-r,1-s);r=Math.max(Math.min(r,1),0),s=Math.max(Math.min(s,1),0);var i=n.getLatLngs(),a=t.GeometryUtil.interpolateOnLine(e,n,r),c=t.GeometryUtil.interpolateOnLine(e,n,s);if(r==s){var u=t.GeometryUtil.interpolateOnLine(e,n,s);return[u.latLng]}a.predecessor==-1&&(a.predecessor=0),c.predecessor==-1&&(c.predecessor=0);var y=i.slice(a.predecessor+1,c.predecessor+1);return y.unshift(a.latLng),y.push(c.latLng),y},isBefore:function(e,n){if(!n)return!1;var r=e.getLatLngs(),s=n.getLatLngs();return r[r.length-1].equals(s[0])},isAfter:function(e,n){if(!n)return!1;var r=e.getLatLngs(),s=n.getLatLngs();return r[0].equals(s[s.length-1])},startsAtExtremity:function(e,n){if(!n)return!1;var r=e.getLatLngs(),s=n.getLatLngs(),i=r[0];return i.equals(s[0])||i.equals(s[s.length-1])},computeAngle:function(e,n){return Math.atan2(n.y-e.y,n.x-e.x)*180/Math.PI},computeSlope:function(e,n){var r=(n.y-e.y)/(n.x-e.x),s=e.y-r*e.x;return{a:r,b:s}},rotatePoint:function(e,n,r,s){var i=e.getMaxZoom();i===1/0&&(i=e.getZoom());var a=r*Math.PI/180,c=e.project(n,i),u=e.project(s,i),y=Math.cos(a)*(c.x-u.x)-Math.sin(a)*(c.y-u.y)+u.x,d=Math.sin(a)*(c.x-u.x)+Math.cos(a)*(c.y-u.y)+u.y;return e.unproject(new t.Point(y,d),i)},bearing:function(e,n){var r=Math.PI/180,s=e.lat*r,i=n.lat*r,a=e.lng*r,c=n.lng*r,u=Math.sin(c-a)*Math.cos(i),y=Math.cos(s)*Math.sin(i)-Math.sin(s)*Math.cos(i)*Math.cos(c-a),d=(Math.atan2(u,y)*180/Math.PI+360)%360;return d>=180?d-360:d},destination:function(e,n,r){n=(n+360)%360;var s=Math.PI/180,i=180/Math.PI,a=t.CRS.Earth.R,c=e.lng*s,u=e.lat*s,y=n*s,d=Math.sin(u),f=Math.cos(u),p=Math.cos(r/a),h=Math.sin(r/a),G=Math.asin(d*p+f*h*Math.cos(y)),_=c+Math.atan2(Math.sin(y)*h*f,p-d*Math.sin(G));return _=_*i,_=_>180?_-360:_<-180?_+360:_,t.latLng([G*i,_])},angle:function(e,n,r){var s=e.latLngToContainerPoint(n),i=e.latLngToContainerPoint(r),a=Math.atan2(i.y-s.y,i.x-s.x)*180/Math.PI+90;return a+=a<0?360:0,a},destinationOnSegment:function(e,n,r,s){var i=t.GeometryUtil.angle(e,n,r),a=t.GeometryUtil.destination(n,i,s);return t.GeometryUtil.closestOnSegment(e,a,n,r)}}),t.GeometryUtil})})(lo);function co(o,t){return(o%t+t)%t}function uo(o){return Object.fromEntries(Object.entries(o).filter(([t,e])=>e!==void 0))}function ae(o){return o.toString().trim().slice(o.toString().length-1,o.toString().length)==="m"}function st(o){return o.toString().trim().slice(o.toString().length-1,o.toString().length)==="%"}function ie(o){return o.toString().trim().slice(o.toString().length-2,o.toString().length)==="px"}function Ue(o,t){let e=t.getCenter(),n=t.latLngToLayerPoint(e),r={x:n.x+Number(o),y:n.y},s=t.layerPointToLatLng(r);return t.distance(e,s)}L.Polyline.include({arrowheads:function(o={}){const t={yawn:60,size:"15%",frequency:"allvertices",proportionalToTotal:!1};this.options.noClip=!0;let e=Object.assign({},t,o);return this._arrowheadOptions=e,this._hatsApplied=!0,this},buildVectorHats:function(o){this._arrowheads&&this._arrowheads.remove(),this._ghosts&&this._ghosts.remove();let t=Object.getPrototypeOf(Object.getPrototypeOf(this.options)),e=Object.assign({},t,this.options),n=Object.assign({},e,o);n.smoothFactor=1,n.fillOpacity=1,n.fill=!!o.fill,n.interactive=!1;let r=o.size.toString(),s=[];const{frequency:i,offsets:a}=o;(a!=null&&a.start||a!=null&&a.end)&&this._buildGhosts({start:a.start,end:a.end}),(this._ghosts||this)._parts.forEach((y,d)=>{const f=y.map(j=>this._map.layerPointToLatLng(j)),p=(()=>{let j=0;for(var v=0;v<y.length-1;v++)j+=this._map.distance(f[v],f[v+1]);return j})();let h,G,_,g;if(isNaN(i)?st(i)?console.error("Error: arrowhead frequency option cannot be given in percent.  Try another unit."):ae(i)?(_=i.slice(0,i.length-1)/p,g=1/_,g=Math.floor(g),_=1/g):ie(i)&&(_=(()=>{let j=i.slice(0,i.length-2);return Ue(j,this._map)/p})(),g=1/_,g=Math.floor(g),_=1/g):(_=1/i,g=i),o.frequency==="allvertices")G=(()=>{let j=[];for(var v=1;v<f.length;v++){let k=L.GeometryUtil.angle(this._map,f[co(v-1,f.length)],f[v])+180;j.push(k)}return j})(),h=f,h.shift();else if(o.frequency==="endonly"&&f.length>=2)h=[f[f.length-1]],G=[L.GeometryUtil.angle(this._map,f[f.length-2],f[f.length-1])+180];else{h=[];let j=[];for(var b=0;b<g;b++){let v=L.GeometryUtil.interpolateOnLine(this._map,f,_*(b+1));v&&(j.push(v),h.push(v.latLng))}G=(()=>{let v=[];for(var k=0;k<j.length;k++){let m=L.GeometryUtil.angle(this._map,f[j[k].predecessor+1],f[j[k].predecessor]);v.push(m)}return v})()}let U=[];const $=(j,v={})=>{let k=v.yawn??o.yawn,m=L.GeometryUtil.destination(h[b],G[b]-k/2,j),P=L.GeometryUtil.destination(h[b],G[b]+k/2,j),z=[[m.lat,m.lng],[h[b].lat,h[b].lng],[P.lat,P.lng]],Q=o.fill?L.polygon(z,{...n,...v}):L.polyline(z,{...n,...v});U.push(Q)},X=(j,v={})=>{let k=j.slice(0,j.length-2),m=v.yawn??o.yawn,P=this._map.latLngToLayerPoint(h[b]),z=G[b],Q=(180-z-m/2)*(Math.PI/180),ft=(180-z+m/2)*(Math.PI/180),Mo=k*Math.sin(Q),Co=k*Math.cos(Q),wo=k*Math.sin(ft),Go=k*Math.cos(ft),ko={x:P.x+Mo,y:P.y+Co},Io={x:P.x+wo,y:P.y+Go},pt=this._map.layerPointToLatLng(ko),mt=this._map.layerPointToLatLng(Io),ht=[[pt.lat,pt.lng],[h[b].lat,h[b].lng],[mt.lat,mt.lng]],Ao=o.fill?L.polygon(ht,{...n,...v}):L.polyline(ht,{...n,...v});U.push(Ao)};for(var b=0;b<h.length;b++){let{perArrowheadOptions:v,...k}=o;if(v=v?v(b):{},v=Object.assign(k,uo(v)),r=v.size??r,ae(r)){let m=r.slice(0,r.length-1);$(m,v)}else if(st(r)){let m=r.slice(0,r.length-1),P=(()=>o.frequency==="endonly"&&o.proportionalToTotal?p*m/100:p/(y.length-1)*m/100)();$(P,v)}else ie(r)?X(o.size,v):console.error("Error: Arrowhead size unit not defined.  Check your arrowhead options.")}s.push(...U)});let u=L.layerGroup(s);return this._arrowheads=u,this},getArrowheads:function(){return this._arrowheads?this._arrowheads:console.error("Error: You tried to call '.getArrowheads() on a shape that does not have a arrowhead.  Use '.arrowheads()' to add a arrowheads before trying to call '.getArrowheads()'")},_buildGhosts:function({start:o,end:t}){if(o||t){let e=this.getLatLngs();e=Array.isArray(e[0])?e:[e];const n=e.map(r=>{const s=(()=>{let i=0;for(var a=0;a<r.length-1;a++)i+=this._map.distance(r[a],r[a+1]);return i})();if(o){let i=(()=>{if(ae(o))return Number(o.slice(0,o.length-1));if(ie(o)){let c=Number(o.slice(0,o.length-2));return Ue(c,this._map)}})(),a=L.GeometryUtil.interpolateOnLine(this._map,r,i/s);r=r.slice(a.predecessor===-1?1:a.predecessor+1,r.length),r.unshift(a.latLng)}if(t){let i=(()=>{if(ae(t))return Number(t.slice(0,t.length-1));if(ie(t)){let c=Number(t.slice(0,t.length-2));return Ue(c,this._map)}})(),a=L.GeometryUtil.interpolateOnLine(this._map,r,(s-i)/s);r=r.slice(0,a.predecessor+1),r.push(a.latLng)}return r});this._ghosts=L.polyline(n,{...this.options,color:"rgba(0,0,0,0)",stroke:0,smoothFactor:0,interactive:!1}),this._ghosts.addTo(this._map)}},deleteArrowheads:function(){this._arrowheads&&(this._arrowheads.remove(),delete this._arrowheads,delete this._arrowheadOptions,this._hatsApplied=!1),this._ghosts&&this._ghosts.remove()},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath(),this._hatsApplied&&(this.buildVectorHats(this._arrowheadOptions),this._map.addLayer(this._arrowheads)))},remove:function(){return this._arrowheads&&this._arrowheads.remove(),this._ghosts&&this._ghosts.remove(),this.removeFrom(this._map||this._mapToAdd)}}),L.LayerGroup.include({removeLayer:function(o){var t=o in this._layers?o:this.getLayerId(o);return this._map&&this._layers[t]&&(this._layers[t]._arrowheads&&this._layers[t]._arrowheads.remove(),this._map.removeLayer(this._layers[t])),delete this._layers[t],this},onRemove:function(o,t){for(var t in this._layers)this._layers[t]&&this._layers[t].remove();this.eachLayer(o.removeLayer,o)}}),L.Map.include({removeLayer:function(o){var t=L.Util.stamp(o);return o._arrowheads&&o._arrowheads.remove(),o._ghosts&&o._ghosts.remove(),this._layers[t]?(this._loaded&&o.onRemove(this),o.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(o.getAttribution()),delete this._layers[t],this._loaded&&(this.fire("layerremove",{layer:o}),o.fire("remove")),o._map=o._mapToAdd=null,this):this}}),L.GeoJSON.include({geometryToLayer:function(o,t){var e=o.type==="Feature"?o.geometry:o,n=e?e.coordinates:null,r=[],s=t&&t.pointToLayer,i=t&&t.coordsToLatLng||L.GeoJSON.coordsToLatLng,a,c,u,y;if(!n&&!e)return null;switch(e.type){case"Point":return a=i(n),this._pointToLayer(s,o,a,t);case"MultiPoint":for(u=0,y=n.length;u<y;u++)a=i(n[u]),r.push(this._pointToLayer(s,o,a,t));return new L.FeatureGroup(r);case"LineString":case"MultiLineString":c=L.GeoJSON.coordsToLatLngs(n,e.type==="LineString"?0:1,i);var d=new L.Polyline(c,t);return t.arrowheads&&d.arrowheads(t.arrowheads),d;case"Polygon":case"MultiPolygon":return c=L.GeoJSON.coordsToLatLngs(n,e.type==="Polygon"?1:2,i),new L.Polygon(c,t);case"GeometryCollection":for(u=0,y=e.geometries.length;u<y;u++){var f=this.geometryToLayer({geometry:e.geometries[u],type:"Feature",properties:o.properties},t);f&&r.push(f)}return new L.FeatureGroup(r);default:throw new Error("Invalid GeoJSON object.")}},addData:function(o){var t=L.Util.isArray(o)?o:o.features,e,n,r;if(t){for(e=0,n=t.length;e<n;e++)r=t[e],(r.geometries||r.geometry||r.features||r.coordinates)&&this.addData(r);return this}var s=this.options;if(s.filter&&!s.filter(o))return this;var i=this.geometryToLayer(o,s);return i?(i.feature=L.GeoJSON.asFeature(o),i.defaultOptions=i.options,this.resetStyle(i),s.onEachFeature&&s.onEachFeature(o,i),this.addLayer(i)):this},_pointToLayer:function(o,t,e,n){return o?o(t,e):new L.Marker(e,n&&n.markersInheritOptions&&n)}});const yo=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Be={...K,smoothFactor:{type:Number},noClip:{type:Boolean,default:void 0},latLngs:{type:Array,required:!0,custom:!0}},at=(o,t,e)=>{const{options:n,methods:r}=ee(o,t,e),s=M(o,Be,n),i={...r,setSmoothFactor(a){t.value.setStyle({smoothFactor:a})},setNoClip(a){t.value.setStyle({noClip:a})},addLatLng(a){t.value.addLatLng(a)}};return{options:s,methods:i}},fo=Object.freeze(Object.defineProperty({__proto__:null,arrowheadsProps:Be,setupArrowheads:at},Symbol.toStringTag,{value:"Module"})),po=l.defineComponent({name:"LArrowheads",props:Be,setup(o,t){const e=l.ref(),n=l.ref(!1),r=l.inject(w),s=S(A),{options:i,methods:a}=at(o,e,t);return l.onMounted(async()=>{const{polyline:c}=r?T.L:await import("leaflet/dist/leaflet-src.esm");await Promise.resolve().then(()=>yo),e.value=l.markRaw(c(o.latLngs,i));const{listeners:u}=I(t.attrs);e.value.on(u),e.value.arrowheads({size:"20px",fill:!0,frequency:"10000m"}),C(a,e.value,o),s({...o,...a,leafletObject:e.value}),n.value=!0,l.nextTick(()=>t.emit("ready",e.value))}),{ready:n,leafletObject:e}},render(){return B(this.ready,this.$slots)}}),ze={...q,content:{type:String,default:null}},Ne=(o,t)=>{const{options:e,methods:n}=E(o),r={...n,setContent(s){t.value&&s!==null&&s!==void 0&&t.value.setContent(s)}};return{options:e,methods:r}},$e=o=>o.default?l.h("div",{ref:"root"},o.default()):null,mo=Object.freeze(Object.defineProperty({__proto__:null,popperProps:ze,render:$e,setupPopper:Ne},Symbol.toStringTag,{value:"Module"})),it={...ze,latLng:{type:[Object,Array],default:()=>[]}},lt=(o,t)=>{const{options:e,methods:n}=Ne(o,t);return{options:e,methods:n}},ho=Object.freeze(Object.defineProperty({__proto__:null,popupProps:it,setupPopup:lt},Symbol.toStringTag,{value:"Module"})),go=l.defineComponent({name:"LPopup",props:it,setup(o,t){const e=l.ref(),n=l.ref(null),r=l.inject(w),s=S(me),i=S(ge),{options:a,methods:c}=lt(o,e);return l.onMounted(async()=>{const{popup:u}=r?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(u(a)),o.latLng!==void 0&&e.value.setLatLng(o.latLng),C(c,e.value,o);const{listeners:y}=I(t.attrs);e.value.on(y),e.value.setContent(o.content||n.value||""),s(e.value),l.nextTick(()=>t.emit("ready",e.value))}),l.onBeforeUnmount(()=>{i()}),{root:n,leafletObject:e}},render(){return $e(this.$slots)}}),xe={...V,latLngs:{...V.latLngs,required:!1},bounds:{type:Object,custom:!0}},ct=(o,t,e)=>{const{options:n,methods:r}=Ae(o,t,e),s=M(o,xe,n),i={...r,setBounds(a){t.value.setBounds(a)},setLatLngs(a){t.value.setBounds(a)}};return{options:s,methods:i}},bo=Object.freeze(Object.defineProperty({__proto__:null,rectangleProps:xe,setupRectangle:ct},Symbol.toStringTag,{value:"Module"})),Lo=l.defineComponent({name:"LRectangle",props:xe,setup(o,t){const e=l.ref(),n=l.ref(!1),r=l.inject(w),s=S(A),{options:i,methods:a}=ct(o,e,t);return l.onMounted(async()=>{const{rectangle:c,latLngBounds:u}=r?T.L:await import("leaflet/dist/leaflet-src.esm"),y=o.bounds?u(o.bounds):u(o.latLngs||[]);e.value=l.markRaw(c(y,i));const{listeners:d}=I(t.attrs);e.value.on(d),C(a,e.value,o),s({...o,...a,leafletObject:e.value}),n.value=!0,l.nextTick(()=>t.emit("ready",e.value))}),{ready:n,leafletObject:e}},render(){return B(this.ready,this.$slots)}}),le={...ne,tms:{type:Boolean,default:void 0},subdomains:{type:[String,Array],validator:o=>typeof o=="string"?!0:Array.isArray(o)?o.every(t=>typeof t=="string"):!1},detectRetina:{type:Boolean,default:void 0},url:{type:String,required:!0,custom:!0}},Fe=(o,t,e)=>{const{options:n,methods:r}=Ce(o,t,e),s=M(o,le,n),i={...r};return{options:s,methods:i}},vo=Object.freeze(Object.defineProperty({__proto__:null,setupTileLayer:Fe,tileLayerProps:le},Symbol.toStringTag,{value:"Module"})),Oo=l.defineComponent({props:le,setup(o,t){const e=l.ref(),n=l.inject(w),r=S(A),{options:s,methods:i}=Fe(o,e,t);return l.onMounted(async()=>{const{tileLayer:a}=n?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(a(o.url,s));const{listeners:c}=I(t.attrs);e.value.on(c),C(i,e.value,o),r({...o,...i,leafletObject:e.value}),l.nextTick(()=>t.emit("ready",e.value))}),{leafletObject:e}},render(){return null}}),ut={...ze},dt=(o,t)=>{const{options:e,methods:n}=Ne(o,t),r=S(be);return l.onBeforeUnmount(()=>{r()}),{options:e,methods:n}},_o=Object.freeze(Object.defineProperty({__proto__:null,setupTooltip:dt,tooltipProps:ut},Symbol.toStringTag,{value:"Module"})),So=l.defineComponent({name:"LTooltip",props:ut,setup(o,t){const e=l.ref(),n=l.ref(null),r=l.inject(w),s=S(he),{options:i,methods:a}=dt(o,e);return l.onMounted(async()=>{const{tooltip:c}=r?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(c(i)),C(a,e.value,o);const{listeners:u}=I(t.attrs);e.value.on(u),e.value.setContent(o.content||n.value||""),s(e.value),l.nextTick(()=>t.emit("ready",e.value))}),{root:n,leafletObject:e}},render(){return $e(this.$slots)}}),De={...le,layers:{type:String,required:!0},styles:{type:String},format:{type:String},transparent:{type:Boolean,default:void 0},version:{type:String},crs:{type:Object},uppercase:{type:Boolean,default:void 0}},yt=(o,t,e)=>{const{options:n,methods:r}=Fe(o,t,e);return{options:M(o,De,n),methods:{...r}}},jo=Object.freeze(Object.defineProperty({__proto__:null,setupWMSTileLayer:yt,wmsTileLayerProps:De},Symbol.toStringTag,{value:"Module"})),Po=l.defineComponent({props:De,setup(o,t){const e=l.ref(),n=l.inject(w),r=S(A),{options:s,methods:i}=yt(o,e,t);return l.onMounted(async()=>{const{tileLayer:a}=n?T.L:await import("leaflet/dist/leaflet-src.esm");e.value=l.markRaw(a.wms(o.url,s));const{listeners:c}=I(t.attrs);e.value.on(c),C(i,e.value,o),r({...o,...i,leafletObject:e.value}),l.nextTick(()=>t.emit("ready",e.value))}),{leafletObject:e}},render(){return null}}),To=Object.freeze(Object.defineProperty({__proto__:null,Arrowheads:fo,Circle:Pt,CircleMarker:jt,Component:vt,Control:Ct,ControlAttribution:Gt,ControlLayers:It,ControlScale:Ut,ControlZoom:zt,FeatureGroup:xt,GeoJSON:Dt,GridLayer:Et,Icon:Wt,ImageOverlay:Ht,InteractiveLayer:_t,Layer:Ot,LayerGroup:$t,Marker:oo,Path:St,Polygon:so,Polyline:ro,Popper:mo,Popup:ho,Rectangle:bo,TileLayer:vo,Tooltip:_o,WmsTileLayer:jo},Symbol.toStringTag,{value:"Module"}));O.Functions=To,O.InjectionKeys=Lt,O.LArrowheads=po,O.LCircle=Tt,O.LCircleMarker=Mt,O.LControl=wt,O.LControlAttribution=kt,O.LControlLayers=At,O.LControlScale=Bt,O.LControlZoom=Nt,O.LFeatureGroup=Ft,O.LGeoJson=qt,O.LGridLayer=Zt,O.LIcon=Jt,O.LImageOverlay=Rt,O.LLayerGroup=Vt,O.LMap=Xt,O.LMarker=no,O.LPolygon=ao,O.LPolyline=io,O.LPopup=go,O.LRectangle=Lo,O.LSVGOverlay=Yt,O.LTileLayer=Oo,O.LTooltip=So,O.LWmsTileLayer=Po,O.Utilities=bt,Object.defineProperty(O,Symbol.toStringTag,{value:"Module"})});
